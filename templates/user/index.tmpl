{{template "include/header" .}}

<h3>Create new user:</h3>
{{template "user/fragment-form"}}

<h3>Peeps</h3>
<form hx-include="[name]" hx-target="#userlist">
  <input name="page" value="1" type="hidden" />
  <div class="row">
    <div class="col">
      <input type="text" class="form-control" placeholder="Search..." name="search" hx-trigger="keyup changed delay:.5s" hx-get="/users.partial"/>
    </div>
    <div class="col">
      <select class="form-select" name="perpage" hx-trigger="change" hx-get="/users.partial">
        <option value="5" selected>5</option>
        <option value="10">10</option>
      </select>
    </div>
  </div>
</form>
<p>
  <table class="table table-sm">
    <tbody id="userlist">
      <tr><td colspan="0">
        <div class="text-center" 
            hx-get="/users.partial?page=1" 
            hx-target="closest tr" 
            hx-swap="outerHTML" 
            hx-trigger="load">Loading...</div>
      </td></tr>
    </tbody>
  </table>

  <!-- <table class="table table-sm">
  <tbody id="userlist">
    {{if len .Users}}
      {{range .Users}}
      {{template "user/fragment-row" .}}
      {{end}}
    {{end}}
  </tbody>
  </table>
  {{template "include/paginate" .Pagination}} -->
</p>

{{template "include/footer" .}}
